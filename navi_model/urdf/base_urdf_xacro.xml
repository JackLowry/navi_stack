<?xml version="1.0"?>
<robot xmlns:body="http://playerstage.sourceforge.net/gazebo/xmlschema/#body"
       xmlns:controller="http://playerstage.sourceforge.net/gazebo/xmlschema/#controller"
       xmlns:geom="http://playerstage.sourceforge.net/gazebo/xmlschema/#geom"
       xmlns:interface="http://playerstage.sourceforge.net/gazebo/xmlschema/#interface"
       xmlns:joint="http://playerstage.sourceforge.net/gazebo/xmlschema/#slider"
       xmlns:sensor="http://playerstage.sourceforge.net/gazebo/xmlschema/#sensor"
       xmlns:xacro="http://ros.org/wiki/xacro">
	<property name="M_PI" value="3.1415926535897931"/>
    <xacro:macro name="navi_base" params="name">
        <link name="base_link">
            <inertial>
                <mass value="50"/>
                <!-- center of mass (com) is defined w.r.t. link local coordinate system -->
                <origin xyz="0 0 -0.2"/>
                <inertia  ixx="1.0" ixy="0.0" ixz="0.0" iyy="100.0" iyz="0.0" izz="1.0"/>
            </inertial>
            <visual>
                <!-- visual origin is defined w.r.t. link local coordinate system -->
                <origin xyz=" 0 0 0" rpy="0 0 0"/>
                <geometry name="base_link_visual_geom">
                    <mesh filename="package://navi_model/meshes/base_link.stl"/>
                </geometry>
                <material name="Blue"/>
            </visual>
            <collision>
                <!-- collision origin is defined w.r.t. link local coordinate system -->
                <origin xyz=" 0 0 -0.18" rpy="0 0 0"/>
                <geometry name="base_link_collision_geom">
                    <box size="0.9917 0.511175 0.358775"/>
                </geometry>
            </collision>
        </link>
        <gazebo reference="base_link">
            <turnGravityOff>False</turnGravityOff>
            <material>Gazebo/Black</material>
            <canonicalBody>base_link</canonicalBody>
        </gazebo>
        <link name="drive_center">
            <inertial>
                <mass value="1"/>
                <!-- center of mass (com) is defined w.r.t. link local coordinate system -->
                <origin xyz="0 0 0"/>
                <inertia  ixx="1.0" ixy="0.0" ixz="0.0" iyy="100.0" iyz="0.0" izz="1.0"/>
            </inertial>
        </link>
        <joint name="drive_center_joint" type="fixed">
            <origin rpy="0 0 0" xyz="-0.367 0 0"/>
            <child link="base_link"/>
            <parent link="drive_center"/>
        </joint>
        <link name="drive_footprint">
            <inertial>
                <mass value="1"/>
                <!-- center of mass (com) is defined w.r.t. link local coordinate system -->
                <origin xyz="0 0 0"/>
                <inertia  ixx="1.0" ixy="0.0" ixz="0.0" iyy="100.0" iyz="0.0" izz="1.0"/>
            </inertial>
        </link>
        <joint name="drive_joint" type="fixed">
            <origin rpy="0 0 0" xyz="0 0 0.485775"/>
            <child link="drive_center"/>
            <parent link="drive_footprint"/>
        </joint>
        <gazebo>
            <controller:gazebo_ros_p3d name="base_link_gt" plugin="libgazebo_ros_p3d.so">
              <alwaysOn>true</alwaysOn>
              <updateRate>20.0</updateRate>
              <bodyName>base_link</bodyName>
              <topicName>/drive/odom</topicName>
              <gaussianNoise>0.0</gaussianNoise>
              <frameName>map</frameName>
              <interface:position name="my_box_p3d_position_iface"/>
            </controller:gazebo_ros_p3d >
            <canonicalBody>drive_footprint</canonicalBody>
        </gazebo>
	</xacro:macro>
</robot>
